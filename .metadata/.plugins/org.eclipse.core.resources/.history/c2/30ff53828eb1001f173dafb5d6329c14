package Model;

import DAO.EmployeeDAOimpl;
import Model.Employee.Poste;
import Model.Employee.Role;

public class EmployeeModel {
    private EmployeeDAOimpl dao;

    // Constructeur
    public EmployeeModel(EmployeeDAOimpl dao) {
        this.dao = dao;
    }

    // Méthode pour ajouter un employé
    public boolean addEmployee(String nom, String prenom, String email, String phone, String salaire, Role role, Poste poste) {
        // Vérification du salaire
        double salaireDouble;
        try {
            salaireDouble = Double.parseDouble(salaire); // Convertir le salaire en double
            if (salaireDouble <= 0) {
                System.out.println("Erreur : le salaire doit être un nombre positif.");
                return false;
            }
        } catch (NumberFormatException e) {
            System.out.println("Erreur : le salaire doit être un nombre valide.");
            return false;
        }

        // Vérification des autres champs obligatoires
        if (nom == null || nom.isEmpty() || prenom == null || prenom.isEmpty() || email == null || email.isEmpty()) {
            System.out.println("Erreur : les champs nom, prénom et email sont obligatoires.");
            return false;
        }

        if (role == null || poste == null) {
            System.out.println("Erreur : le rôle et le poste doivent être spécifiés.");
            return false;
        }

        // Création d'un nouvel employé
        Employee nv = new Employee(nom, prenom, email, phone, salaire, role, poste);

        // Ajout à la base de données via DAO
        boolean success = dao.addEmployee(nv);
        if (success) {
            System.out.println("Employé ajouté avec succès : " + nv);
        } else {
            System.out.println("Erreur : impossible d'ajouter l'employé.");
        }

        return success;
    }
}

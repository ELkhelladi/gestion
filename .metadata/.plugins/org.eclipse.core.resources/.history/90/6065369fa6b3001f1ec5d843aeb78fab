package Model;

import DAO.EmployeeDAOimpl;
import Model.Employee.Poste;
import Model.Employee.Role;

public class EmployeeModel {
    private EmployeeDAOimpl dao;

    public EmployeeModel(EmployeeDAOimpl dao) {
        this.dao = dao;
    }

    public boolean addEmployee(String nom, String prenom, String email, String phone, String salaire, Role role, Poste poste) {
        double salaireDouble;
        try {
            salaireDouble = Double.parseDouble(salaire);
            if (salaireDouble <= 0) {
                System.out.println("Erreur : le salaire doit être un nombre positif.");
                return false;
            }
        } catch (NumberFormatException e) {
            System.out.println("Erreur : le salaire doit être un nombre valide.");
            return false;
        }

        if (nom == null || nom.isEmpty() || prenom == null || prenom.isEmpty() || email == null || email.isEmpty()) {
            System.out.println("Erreur : les champs nom, prénom et email sont obligatoires.");
            return false;
        }

        if (role == null || poste == null) {
            System.out.println("Erreur : le rôle et le poste doivent être spécifiés.");
            return false;
        }

        Employee nv = new Employee(0, nom, prenom, email, phone, salaire, role, poste);
        
        try {
            // Ajout de l'employé à la base de données
            dao.addEmployee(nv);
            System.out.println("Employé ajouté avec succès : " + nv);
            return true;
        } catch (Exception e) {
            System.out.println("Erreur : impossible d'ajouter l'employé. Détails : " + e.getMessage());
            return false;
        }
    }
}
